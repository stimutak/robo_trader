# Robo Trader Environment Configuration
# Copy this file to .env and update with your settings

# ====================
# IBKR Connection
# ====================
# Interactive Brokers Gateway/TWS connection settings
IBKR_HOST=127.0.0.1
IBKR_PORT=7497              # TWS Paper: 7497, TWS Live: 7496
                            # Gateway Paper: 4002, Gateway Live: 4001
IBKR_CLIENT_ID=123          # Unique client ID (0-999)
IBKR_ACCOUNT=               # Optional: specific account number
IBKR_READONLY=true          # Connect in read-only mode
IBKR_TIMEOUT=10.0           # Connection timeout in seconds
IBKR_SSL_MODE=auto          # auto, require (TLS only), or disabled (plain TCP)
IBKR_FORCE_DISCONNECT=0     # Leave disabled; set to 1 only for controlled disconnect tests

# ====================
# Trading Configuration
# ====================
# Execution settings
EXECUTION_MODE=paper        # Trading mode: paper or live (DANGER!)
ENVIRONMENT=dev             # Environment: dev, staging, or production
EXECUTION_MAX_DAILY_TRADES=100
EXECUTION_POSITION_TIMEOUT=24  # Hours before position timeout
EXECUTION_ORDER_TIMEOUT=30     # Seconds before order timeout
EXECUTION_SHORT_SELLING=false  # Enable short selling

# ====================
# Risk Management
# ====================
# Position and portfolio limits
RISK_MAX_POSITION_PCT=0.02      # Max 2% of portfolio per position
RISK_MAX_DAILY_LOSS_PCT=0.005   # Max 0.5% daily loss
RISK_MAX_PORTFOLIO_BETA=1.2     # Maximum portfolio beta
RISK_CORRELATION_LIMIT=0.7      # Max correlation between positions
RISK_MIN_VOLUME=1000000         # Minimum daily volume filter
RISK_MIN_MARKET_CAP=1000000000  # Minimum $1B market cap
RISK_MAX_SECTOR_EXPOSURE=0.3    # Max 30% in one sector
RISK_MAX_LEVERAGE=2.0           # Maximum account leverage
RISK_STOP_LOSS_PCT=0.02         # Default 2% stop loss
RISK_TAKE_PROFIT_PCT=0.05       # Default 5% take profit
RISK_MAX_ORDER_NOTIONAL=10000   # Max $10K per order
RISK_MAX_DAILY_NOTIONAL=100000  # Max $100K daily volume
RISK_MAX_OPEN_POSITIONS=20      # Maximum concurrent positions
RISK_POSITION_SIZING=atr        # Method: fixed, atr, or kelly
RISK_USE_TRAILING_STOP=false    # Enable trailing stops
RISK_TRAILING_STOP_PCT=0.015    # Trailing stop distance

# ====================
# Data Configuration
# ====================
DATA_PROVIDER=IBKR              # Data source: IBKR, ALPACA, POLYGON
DATA_STORAGE=sqlite             # Storage: sqlite, postgres, mongodb
DATA_FEATURE_WINDOW=100         # Bars for indicator calculation
DATA_TICK_BUFFER=10000          # Tick buffer size
DATA_CACHE_TTL=300              # Cache TTL in seconds
DATA_ENABLE_REALTIME=true       # Enable real-time streaming
DATA_HISTORICAL_DAYS=30         # Days of historical data
DATA_BAR_SIZE=5 mins            # Bar size for historical data

# ====================
# Strategy Configuration
# ====================
STRATEGY_ENABLED=momentum,mean_reversion  # Comma-separated list
STRATEGY_COMBINATION=weighted    # Signal combination: vote, weighted, priority
STRATEGY_MIN_CONFIDENCE=0.6      # Minimum signal confidence
STRATEGY_REBALANCE=daily         # Rebalance frequency
STRATEGY_MOMENTUM_LOOKBACK=20    # Momentum lookback period
STRATEGY_MEAN_REVERSION_PERIOD=14 # Mean reversion period
STRATEGY_BREAKOUT_VOLUME=1.5     # Volume factor for breakouts

# ====================
# Monitoring & Logging
# ====================
MONITORING_ENABLE_ALERTS=true    # Enable alert system
MONITORING_ALERT_EMAIL=          # Email for alerts
MONITORING_ALERT_WEBHOOK=        # Webhook URL for alerts
MONITORING_METRICS_PORT=9090     # Metrics server port
MONITORING_HEALTH_CHECK_INTERVAL=60  # Health check interval (seconds)
MONITORING_LOG_LEVEL=INFO        # Log level: DEBUG, INFO, WARNING, ERROR
MONITORING_LOG_FORMAT=json       # Log format: json or text
LOG_FILE=                        # Optional: log file path

# ====================
# Trading Symbols
# ====================
# Comma-separated list of symbols to trade
SYMBOLS=AAPL,MSFT,GOOGL,AMZN,META,NVDA,TSLA,JPM,V,JNJ,WMT,PG,UNH,HD,MA,DIS,BAC,XOM,PFE,VZ

# ====================
# Portfolio Settings
# ====================
DEFAULT_CASH=100000             # Starting cash for paper trading
MAX_DAILY_LOSS=1000            # Legacy: absolute daily loss limit

# ====================
# API Keys (if needed)
# ====================
ANTHROPIC_API_KEY=              # For AI market analysis
OPENAI_API_KEY=                 # Alternative AI provider
NEWS_API_KEY=                   # News data provider
ALPHA_VANTAGE_API_KEY=          # Market data provider

# ====================
# Database Configuration
# ====================
DATABASE_URL=sqlite:///trading_data.db  # Database connection string

# ====================
# Advanced Settings
# ====================
# Only modify if you know what you're doing
MAX_POSITION_RISK_PCT=0.01      # Legacy setting
MAX_SYMBOL_EXPOSURE_PCT=0.2     # Legacy setting

# ====================
# Notes
# ====================
# 1. NEVER commit your actual .env file to git
# 2. Keep API keys and sensitive data secure
# 3. Test with paper trading before going live
# 4. Monitor logs regularly for issues
# 5. Set up alerts for production use
